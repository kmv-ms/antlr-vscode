CReATe oR RePLACE  trigGeR NaMe   .  :35  @ “Ñ  @ ""    fOR  SUsPeND   oN dAtABASe  BegiN  excEPTiON whEN JOiN  @ "≠Éê" @ :#$   Ôºà :#‡æ∫   =>  eXiStS  Ôºà witH "êã©" @ LocaTor     Ôºà "£∫ù" @ ddl  @ PRIor   ( UNIqUE dEfaulT   , Not *   likeC  "´±Æ"  .  :2  @ "•ö£" . "ùÖñ"  ( alL )     MulTiset InTersECT DiStINCT  xmlcAsT ( MulTISET Ôºà sElecT ""  =>  deFAULT  "ùì¢"      intO "" @ "®á™"  ( Ôºâ   ( dIRect_lOaD  ‚®±  =>  NOT CUrRENt Of  ‚®±   aNd ‚®± % IsoPen  At LoCAL    MuLTiseT inTeRseCT  ‚®± % bUlK_ExCepTioNs ( ‚®± Ôºâ  . erROr_cOde   aT Time zoNE DbtiMezOnE     ** tRIM ( ‚®± Ôºâ   mULtiset excepT  DeCode ( ‚®± Ôºâ     *  ‚®± WIThIn grouP ( ORDEr SibliNgS BY ‚®± ASC  nULlS lAst   , ‚®±    )  OvER Ôºà PaRTItIon BY ‚®±  ORdeR SIblinGs BY ‚®± asc  nulLS LASt     )   at lOCaL            or Ôºà ‚®± )  oVErLaPs Ôºà ‚®± )      and noT *   =  ‚®± ovEr ( oRDEr By ‚®± NulLs LAST   Ôºå ‚®± asc     raNGE unBoundED pREceDing    )    MULtIsEt UniOn all  Ôºà ( ‚®± Ôºâ  minUS  ( ‚®± Ôºâ  ORder bY ‚®± aSC     WITH rEAD ONly  ConsTRAINT "" @ FiRsT_rOwS       Ôºâ  at TIme zonE CHR Ôºà ‚®± Using nCHAR_CS Ôºâ  AT TIme zONe seSSIontIMezone        ** tREAt Ôºà ‚®± AS _‡•Ø   .  Lob     )  . ‚®±   at locaL    MUltIset UniON  CAsE whEn ‚®± thEN ‚®±   eNd     /  ?    ** PrIoR Ôºà ‚®± ) At lOCAL      MUltiSeT uniOn diStINct  n''''   aT timE ZoNe sESsiontImEZoNe       ||  ExtraCT Ôºà ‚®±  , *    Ôºâ  At locAL    mUltIsET iNTersECt dIstiNCt  ‚®± OvER Ôºà PaRTItioN By ‚®±  )   aT Time ZONE sEsSIONtiMEZone     ** CurSOr ( wiTH "" @ "" . :2     ( ‚®± , ‚®±  Ôºâ  aS ( ‚®± Ôºâ  SearCh BreAdth fIrSt By ‚®±   seT "¶ú∂" @ :23  @ "§äÅ"   .  :42        selecT aLl ‚®±  BULk ColleCt InTO ‚®±   fRom "‚ë£" @ "••ë"    AS Of tIMEsTAMP  ‚®±   UnpIvOT eXCludE nUlls ( Ôºà ‚®± Ôºå ‚®±  )   for ‚®±   IN ( ‚®±   Ôºâ   )     NOMaPpiNg        whERE ‚®±    iNTersEcT  Ôºà ‚®± )  fOr UPdate skIP lOcKED    )   MuLtiSEt EXCepT  ?               )   ( + Ôºâ    fRom JsoN_table ( nOT *     aNd neW ageNt           NOt  lIKe2  *        nULl on  ErrOr  COlumns Ôºà "•ë§" @ ·∫â3     paTh 0x8    deFAult True   oN  error    Ôºâ  )   PARtitION bY Ôºà DeFAUlt    Ôºâ  FuLl Outer  JOin  XMLtAbLE ( XMLNAmESPacES ( :·ü≥   =>  NoT (  ‚®± Ôºå ‚®±  )  In  ( wiTh "√¢"   Ôºà "ë®†" @ "•Äï"  Ôºà UnIqUE Ôºâ   ( + Ôºâ  , xMlnaMEspAces   .  *    Ôºâ  aS Ôºà ‚®± )  cYcLe "©ÑÉ" @ REStrICt_rEFErences    ( All ‚®± Ôºâ   Ôºà + )  , deLETE  Ôºà Ôºâ   Ôºà + Ôºâ   seT :60     to .3F    deFaUlt '®∫ó'       SeLect uniQue ‚®±  frOM ‚®± pIvoT ( ‚®± For Ôºà "" @ "¨úí" . ""   .  *   , "¢û¨" Ôºà uNIquE Ôºâ     )    in ‚®±  Ôºâ       PiVOT ( ‚®± foR :2  @ ‚Ωï#   Ôºà )   ( ‚®± )   ( + )    In ( ‚®±   , ANy   )   )     Ôºå ‚®± VERSiONs PErIOd fOR cOLlatioN  ( All ‚®± Ôºâ   .  "" @ :24    ( + )  ‚®±  TrANSlAtE Ôºà ‚®± uSINg CHAR_cS Ôºâ   MulTISEt ExcepT diStinCt  ‚®± aT LOcAl      /  - "ò§Ω" @ "°™ª"  ( ‚®± )    KEeP ( deNsE_RanK laSt OrdER siblings by ‚®±  , ‚®± NulLS LASt     )    AT TIME zONe dbtIMEzoNE    multIseT exCEPT  EXTRACT Ôºà daY FrOM ‚®±  )  At TiMe ZonE XMLagg ( ‚®± Ôºâ         -  nULL  aT LOcAL      /  TraNSlAte Ôºà ‚®± USInG nCHar_cs Ôºâ    ** tRanSlAtE Ôºà ‚®± usiNg Nchar_CS )   mULtiSEt EXcEpT  Sys_CoNNecT_bY_PATH ( DisTiNct Ôºâ   At LoCAl         And *      as a  @ "¢ùö" . DATE      pArTITIon bY Ôºà ‚®± Ôºâ     STaRt WiTh ‚®±  cONnEcT By NoCYCle ‚®±  GRoup BY ( )    , Ôºà Ôºà ‚®±   Ôºå Ôºà ‚®± )   )   Ôºâ        foR upDATe OF  :86   Ôºà + )   nOwaiT   ORdeR by ‚®± dESC  nulLS fIrst   Ôºå ‚®±     )     and ( ‚®± Ôºâ  OVERLaps ( ‚®± Ôºâ       or Not cURrEnT of  "" @ sUsPENd  @ Row    Ôºà ‚®± )         as :_  @ #  @ INiTIALLY       default 0x3   Ôºâ  Ôºå $4.6  PaSSiNg DEFault  "†î≤" @ :‡∑ñ5      Ôºå fOrAlL  Ôºà ALl )   =>  deFaULT      )   pArTiTiON by ( cONNeCt_by_ROOT XmLquEry Ôºà ‚®±    +  ‚®±  ** ‚®±   /  ‚®± MULtISET eXCEpT ALl  ‚®±      PAsSing By VaLuE ‚®±  ** ‚®±   Mod  ‚®± MULtIset INTerseCt  ‚®±    ||  ‚®±  ** ‚®± mUltiSeT ExCept  ‚®±   *  ‚®±       , *   as "" @ "" . ""   Ôºà + )    retuRniNG cOntENT Ôºâ     at TIme zoNE dBTIMEZonE    mulTISeT IntErseCt All  PRior exTRAcT Ôºà ‚®±  , *    , *    )  AT LOCAL       ** nEW SEttiNGS  Ôºà Distinct ‚®± Ôºâ      muLTISet ExCEpt  InteRVAl '''' DAy ( UQ'\\'   , .3f   Ôºâ   To MonTH    at TiME ZonE + ‚®± at LOcal         *  xmlqUeRy Ôºà tREAt ( ‚®± As reF :88   .  "íëë" @ "" . ""     Ôºâ   aT tIMe zoNE ‚®±     ** :79  ( ‚®± Ôºâ   Ôºà + Ôºâ  oVER Ôºà pArtITiON By ‚®±  ORder BY ‚®± dEsC   Ôºå ‚®± nuLLs fIrSt     Ôºâ         PASSInG "¨Ä∏" @ "" @ "§øë"   .  "•ë∞" @ #   Ôºà )    % bUlK_EXCEPTions . couNt          Ôºå *   As DiRecT_lOAD  @ "™∑¥"   Ôºà + Ôºâ    retURnInG cONTEnt Ôºâ   At Time ZONE DBtiMezONe    MuLtIsEt IntERseCT All  + ""  ( DIStIncT )   Ôºà + )   aT lOCAL       ||  "" ( )    keep Ôºà DENse_rANK fiRST ORDEr by ‚®± DESC  NUlLs last     Ôºâ  oVeR Ôºà Ôºâ    mulTiSEt UnION aLl  :3  Ôºà ‚®± Ôºâ   Ôºà UNIQuE ‚®± Ôºâ    % bulk_ROwCOUnt Ôºà ‚®± Ôºâ    AT time zonE DbtIMezOne     ** CasT Ôºà MUltIsET Ôºà seLecT ‚®±  frOm Ôºà ‚®± UNPIVot ( ( BreAdTh   ( + )  Ôºå :ÔΩó  @ ""   .  uSAGe  @ StoRe  @ :53   Ôºà ‚®± Ôºâ     )   foR "™Æó"  ( UniqUE )      In ( ( "" ( alL ‚®± Ôºâ   .  *  ( + )  Ôºå :4  @ DEpTh  . ŸÆ·Ñà      Ôºâ   aS tImeSTaMP ''''      Ôºå Ôºà "" @ ""  Ôºà disTincT )   .  MaSter  Ôºà ‚®± )   Ôºà + )  Ôºå clOb  @ :4  @ "¨∂è"   ( + Ôºâ   )   AS ( DATE ''   )     )   Ôºâ     Ôºâ UNpIVoT InCLUDE NUllS Ôºà "„ãÑ" @ :#‡≤ø      foR Ôºà "" Ôºà disTinct Ôºâ   ( ‚®± )   ( + )   )    IN ( Nosort  @ ""  ( uniQue Ôºâ   .  *     Ôºå Ôºà ""  ( + )  , ""    Ôºâ   AS InteRVAL '' seCOND ( 0X7   )        )   )      CROSs Join  ‚®±    coNNeCT BY noCyclE ‚®±  stART WItH ‚®±  hAViNG ‚®±     Ôºâ  As TImeSTAMP Ôºà uNIqUe )     )        >  ALl  Ôºà ( ‚®± )  UNion  selECT ‚®±  BULk cOlLeCt iNTo FReeList  @ "" @ #ÔØò   ( Ôºâ    , "ñºâ"  .  dENSe_ranK  @ :7    ( + Ôºâ    froM taBle ( ‚®± Ôºâ   InNer jOin  ‚®± usiNg ( "" @ "" @ "íÑ≥"  ( UNiqUE ‚®± Ôºâ    )   pIVOt XML Ôºà ‚®± FOR :13  Ôºà ‚®± Ôºâ   Ôºà AlL )   Ôºà + )    in ‚®±  )     , "ÿ∫"  .  :14  @ "©øà"    SUbpartiTiOn Ôºà kEY  @ ShArded    ( Ôºâ   Ôºà + Ôºâ  )   pARtItIoN by ( ‚®± Ôºâ     WhERe ‚®±  CoNnECt BY ‚®±  STart WITh ‚®±  HavinG ‚®±  GrouP by ROLlUp ( Ôºà ‚®± Ôºå ‚®± Ôºâ   , ‚®±   Ôºâ         for UpDatE OF  "" ( ‚®± Ôºâ    Ôºå EdITiOn  @ ""   ( )   ( + )    OrdeR SIbliNGS By ‚®± nUlls laST     wIth reAd OnlY    )       "°çπ"     )  CROSS Join  tABLe ( Ôºà ‚®± )  with READ ONLY  cONsTRAint "•î§" Ôºà defaULt  As "ó≥¶" @ :Ôø≠       Ôºâ      Ôºâ  VERsioNs BetWeEN ScN  *   ANd coNNECT_bY_rOOT decOdE Ôºà not EXIsts  Ôºà with tiMEStAmp    As ( ‚®± )  CYcle "" @ ‡∂â    Ôºà DistIncT #5  ‚®±  =>  ‚®±  , ISoPEN   =>  DEfAulT  as noMAXVALUe  @ ""      Ôºâ    , "·£Ç" @ cOnsTraINt  @ :Ô≤ø·âÉ   Ôºà aLl ‚®±  , ‚®±   )   Ôºà + Ôºâ   SEt ""    TO n''''    DeFAuLt $.3      Ôºà ‚®± Ôºâ  OrDer SIbLiNgs BY ‚®± dESc      Ôºâ       Ôºâ    at loCal    muLTIseT ExCept  ""  .  *  ( + )  Within gROUP ( orDER By noT CurreNT OF  ALloCatE  @ "¢ñµ"  Ôºà All )         aSC  nuLLS fiRSt   , *   iS NoT A Set     and Ôºà ‚®± Ôºâ At LOCAl    MULtISeT eXCePT dIStiNCt  :17  Ôºà )   .  *   KeEP Ôºà dense_rANK LaST ORDEr sIbLinGs By ‚®± dESc  NuLls FIRST   Ôºå ‚®±    )   At LOCAL      *  sys_COnnecT_BY_PaTh Ôºà )    mULtISeT INTERsECT ALL  NcHr Ôºà ‚®± )    ** "" @ leFT   ( uNIqUE ‚®± =>  dEfAULt   Ôºå DefAult  "°ÜÜ"     )   ( UnIQUE Ôºâ    % FoUnd  aT TimE ZOnE sESSIontiMEZonE         IS nOt OF tYpE Ôºà ONLy :2   .  :44  @ "§¥ö"    )        ASc  NUlls LAST     Ôºâ     ** xMLAgG ( NOT CuRrEnT oF  :#5   ( + )    AND "" @ "≠í£" . "¶™ø"  Ôºà )   .  *   wIthin GRoUp Ôºà oRDER by ‚®±    )  Over ( Ôºâ   aT lOCal    muLtiSET UnION  CaSE when ‚®± tHeN ‚®±  elSe ‚®±   End    ** extRACt ( DAY frOm datE  ‚®±  Ôºâ  At Time zone DBtIMEZone         Not  iN  ( wiTH "¶¶ç" @ BrEADTh    .  ""   As ( ‚®± Ôºâ  seArCH bREadth fIrst By ‚®± nUlLs first   , ‚®±   sET "" @ "ò®≤"   .  :„Üë‹å       , :31  @ pCTuseD  @ YEar     aS ( ‚®± Ôºâ    SELect uNIQUe STRinG   =>  DEfAUlt   , ‚®± As valuE  @ —ù3        BulK COlLEct Into :3   Ôºà "„àÑ" @ mATCHEd  @ "§ùÅ"  ‚®±  =>  ‚®± as ""    Ôºå dEfAUlT    )   ( + )    froM ‚®±  , ‚®± UnpivOT Ôºà "" @ "·¥∫" . :98    Ôºà + Ôºâ   FOR Ôºà #  Ôºà DiSTInCT ‚®± =>  ‚®± "’Ü"    , ‚®± =>  ‚®±   Ôºâ    , dEmaNd  @ "®ø©"   .  "‡¥®" Ôºà UniQue Ôºâ     Ôºâ    iN Ôºà Ôºà "" ( )   ( DeFaUlT  as OiD  @ "ùßà"      )   ( + Ôºâ   Ôºâ    Ôºâ   )      WheRe ‚®±    oRder sIBLIngS BY ‚®±  , ‚®± aSC  nuLLS firsT     fOr upDaTe of  "" @ ""   .  *  Ôºà + )  , :4  ( ‚®± =>  DeFAUlT  rowCoUnT     , ‚®±   )      WItH CHeCK OpTION    )       orDEr bY *   Is  iNFiNItE     And NOt eXisTs  Ôºà WIth "ßæÄ" @ :77    .  ""   As Ôºà ‚®± )  SEaRch BReadth first By ‚®± DESc    SET "Æ®Ø" @ noScaLe         ( ‚®± )  inTerseCt  SeLECt All "" @ INSTancE  . ""   =>  ‚®±  , defaULt  :_  @ ""       bulk COLlect iNTo ÔæÜ   .  :_  @ INTERFAcE    ( + Ôºâ    FroM ‚®± PivoT ( "õãç" Ôºà ALl ‚®± )   =>  deFAULT  aS witHoUt      FoR Ôºà :71  @ "™Æá"   ( aLL ‚®±  Ôºå DEfAULt    )    , "" @ ""  Ôºà DIstInCt Ôºâ   .  "òûé" @ #  @ ""     )    iN Ôºà ‚®±  ""    , ANY   )   Ôºâ     , ‚®±   STarT WITH ‚®±  coNneCT by ‚®±  gRoUP BY gRoupiNG SetS ( ( Ôºâ   , Ôºà ‚®± Ôºå ‚®± )    Ôºâ    , ( ‚®±   Ôºâ      HAViNg ‚®±    ORDeR BY ‚®± ASc  NulLs fIrst   , ‚®± aSc     For updAtE   )       NullS first     )   muLTIsEt UNIOn AlL  CUrsOr ( WIth DEALLoCAte  @ :‚Ω†0  . "§¨ò"   .  mOnth  @ "ßõΩ" . no     Ôºà "·±ì" ( ‚®± =>  NOt Current of  ‚®±   ANd *   nOT  beTwEen  TrIM Ôºà trailiNg ‚®± FRom  ‚®± Ôºâ  aT TiME ZONe ‚®±    muLTIset eXcEpT  NUlL      -  nuLl  AT loCal    mULTISET inTErSEct  cAsT Ôºà ‚®± aS Ôºà true  Ôºå TRue  Ôºâ % TypE    )    ** ( ‚®± Ôºâ at tiME zonE ‚®±      *  + ‚®±       aNd  *        AS ""     )   Ôºà + Ôºâ  Ôºå :ÔæÑ  ( DistInCt )   ( + Ôºâ   Ôºâ  As ( ‚®± Ôºâ  CYCLE "" @ "¢îº" . :72    Ôºà xMlnAMEsPaCeS   =>  DeFAulT  "ñΩµ"    , - ‚®±    /  ‚®± % BUlk_ROWCOunT ( ‚®± )    At locAL    MULtISEt Union ALl  tReat ( ‚®± as Ref "ó≥†" @ :7  @ "°¨©"     Ôºâ  . ‚®±     ** cONneCt_BY_rOOt ‚®±  at tIme ZoNE sEsSIoNTiMEZOnE    mULTiSEt IntERSECt  XmlcAsT ( ‚®± aS REf ‚®±   )  At tIme ZoNe seSSIoNTIMEZONe       ||  ''    multiSEt UNioN DIStinCt  cASt ( mULtISet Ôºà ‚®± Ôºâ  as opaQue fIxEd ‚®± uSiNG LiBRArY ‚®± ;  cHaRACTeR SEt ‚®± % chaRSeT     Ôºâ  AT lOcAL      /  XMLcaSt ( ‚®± as time   RanGe ‚®± ..  ‚®±    Ôºâ   MulTiseT exCEpt dIstInCT  TrIm ( ‚®± )  At TImE zone ‚®±         noT MembER OF ( ‚®± )    ** cAsE ‚®± whEn ‚®± THEN ‚®±  ElsE ‚®±   END  At local       ||  tRIM Ôºà ‚®± Ôºâ     *  ‚®± % rOWcounT  At Local    mUlTiSet ExcePT alL  eXtRACtVALUE ( ‚®±  , ‚®±  )                 Ôºâ    Ôºå LevEL  @ cOnStRuCToR   ( UNIQuE Ôºâ   Ôºà + Ôºâ   set ""    TO tIMeSTAmP ''    deFAult daTE ''      , :17  @ "ëÑó" @ ""    ( :_„ÉÅ  @ sET  . :2   ( Ôºâ    , "êÖõ"  .  *  Ôºà + )   Ôºâ  as Ôºà ‚®± Ôºâ  CyCLE "" @ ""  Ôºà Ôºâ   Ôºà DIstiNCT Ôºâ    Ôºå TruNcAtE   ( All dEFAUlT  as cascAdE     Ôºå nOT EXists  ( ‚®± Ôºâ    AnD NOT *   bEtween  *   AND  *          )     seT "ë¢≥" @ "" @ lOCKeD      To u''    DEFaULT Q'%‡¨ù%'       ( ‚®± )  FOr upDaTe of  "" @ _  @ "†Åñ"   ( + Ôºâ   skip LoCkEd   OrDEr By (  :·ú•‚≥∞  Ôºà ‚®± Ôºå ‚®±  )   =>  deFAUlT   Ôºå "" @ _2  . ""   =>  DEfauLT  exTEnd      )  <  Ôºà ‚®± )     AND DECoDE Ôºà ‚®± Ôºå ‚®± Ôºâ   mULtISet uNIon  PrIOR ‚®±  AT Time zoNE dBtImEzOnE     ** xmLquErY ( ‚®± pasSIng ‚®±  Ôºå ‚®± as :3  @ "" @ IDenTIFIer    Ôºà + )    retUrnInG coNtent Ôºâ   At tIME Zone seSsiontimeZONE    MULtiSet uniON disTINCT  ""  .  *         not SUbMULTisET oF eXTRACT Ôºà TimEZone_ABbr from datE  ‚®±  )  aT LOcaL     ** XMLaGG ( ‚®± oRDeR sIBLINgS By ‚®±    Ôºâ     /  Nchr Ôºà ‚®± )  at TiMe Zone ‚®±    MuLtISeT eXCePt  ?    ** cOnnEct_by_ROot ‚®±  at TIMe ZONE SEsSioNTimezOne    MUlTiseT EXCEPt  ?               nULls LasT      Ôºâ     /  ZoNE  Ôºà )   Ôºà UnIQuE ( ‚®± )  OverLaPS Ôºà ‚®± )       Or not CURreNt of  ‚®±       Ôºå gROups  @ "" . ‘õ   ‚®±  =>  NOT *   Is NOt of Ôºà "†úô"   Ôºå RESuLt_cAChe    Ôºâ      or EXiStS  ( Ôºà ‚®± )  UNiOn alL  sELEcT ‚®±  froM ‚®± pivot XmL ( ‚®± FOR ‚®±   iN ( any   Ôºâ   Ôºâ      starT WIth ‚®±  COnneCT by nocyCLe ‚®±  haVING ‚®±  gRouP by ( GRoupInG sets ( ( ‚®± , ‚®± )   Ôºå ‚®±    Ôºâ    )        wITH CHECK oPTIon    )    anD not CasT ( ‚®± As ( TrUE  Ôºå fALse  )  Ôºâ  AT LOCal       +  ‚®± OVER Ôºà Ôºâ   aT lOCaL     ** CursOr ( SElECt distInCT ‚®±  InTO ‚®±   fRom ‚®± uNPiVOt EXClUDE NUlLs Ôºà ‚®±  fOR Ôºà ‚®± , ‚®±  )    IN ( ( ‚®± , ‚®±  Ôºâ   AS ( daTe '©í±'   , FaLSE   )     )   Ôºâ      wHERe ‚®±    UNion ALL  sELECT ‚®±  fROm ‚®±  , ‚®± PiVoT xmL Ôºà ‚®± fOR ‚®±   IN ( ‚®± Ôºâ   Ôºâ      GRoUp bY Ôºà Ôºâ    Ôºå ( ‚®±   , Ôºà Ôºà ‚®± , ‚®± Ôºâ   Ôºâ   )        WItH rEaD Only  COnstrAINt "" @ :24   ‚®±     Ôºâ   mULtiSeT INtERsEct aLL  syS_cONNECt_By_PATh ‚®±        IN  *         AS :87  @ "" . :·â±       Ôºâ   ( + Ôºâ  % roWcOUnt  aT TIMe ZOne dBtIMezONE           unPIVOT IncLude NUlLS ( "°óè" Ôºà DiSTincT )     FOR Ôºà save   Ôºà + Ôºâ  Ôºå :78   .  "•Ñ≥" @ :_  . ""   ( + )   Ôºâ    In Ôºà pAcKagE  @ "‚éÑ" . ""  Ôºà ‚®± =>  NoT extRaCt Ôºà tiMeZoNE_Hour frOm ‚®±  )  AT local       ||  Sys_cONneCt_By_pATH ‚®±  At tIme ZonE sEssiOntimEZONE     ** ( ‚®± Ôºâ  MultiSeT intERSEct  TRaNSLAtE Ôºà ‚®± uSINg Char_Cs Ôºâ     mod  ‚®± % BuLK_rOwCounT Ôºà ‚®± )      ** Decode Ôºà ‚®± )  at LocAl    MUlTIseT iNtErsECT  TIMEsTaMP ''         IS  NoT  nAn     aND (  ‚®± , ‚®±  Ôºâ  noT  iN  Ôºà ( ‚®± )  MiNuS  SeLECT DISTinct ‚®±  fROM ‚®±  , ‚®± uNPIVOt Ôºà ‚®±  fOr Ôºà ‚®± , ‚®±  )    in ( ‚®±   Ôºâ   )      WHEre ‚®±  conneCT By ‚®±    with check OptION    )      OR noT *   nOT  BetWEEn  caST ( ‚®± As ‚®±  Ôºâ  at TiME Zone neW ‚®±      MULtISet excEPT  Sys_conNeCT_By_PatH ‚®±  At LOcAl         aND  XmlqUERY ( nEW ‚®±  AT LocaL    mULTIsET InTERsEcT DisTInCt  - ‚®±     +  Chr Ôºà ‚®± usINg Nchar_Cs )   mUltiset intErSEcT alL  NULL  at loCAL         PaSSinG bY vALue *   as ‚®±  , caSE wheN ‚®± ThEn ‚®±   ENd   MuLTiSEt iNTerSeCT  ‚®± keEP Ôºà dENsE_rank firSt ordER by ‚®±    Ôºâ  ovEr Ôºà PArTItion BY ‚®±  oRdEr SIblIngS BY ‚®± DEsc     RANGe BetWEeN cUrrent RoW  AND cURREnt RoW    Ôºâ   At TIMe ZoNE DBtimezoNe     ** exTracT Ôºà dAy FroM ‚®±  )   Multiset exCEpT DIsTinCt  NuLl     mOd  + ‚®± aT TIME ZoNe dbtiMEZOne    muLTISEt uNION aLl  XMlcasT Ôºà ‚®± AS DoUBlE PreCISiOn  chAraCtER SET ‚®±    )  AT TiMe zonE ‚®±     ** ‚®±         RetuRNIng conTeNt )   aT LoCAl    mulTiseT inTerSEcT  cURsOR Ôºà wIth eXtRACT  @ vERsIONs  . archiVe    .  "" @ ""    AS Ôºà ‚®± Ôºâ  SEArCH breaDth fIrsT BY ‚®± Asc  NullS First    SET "óÄ∂" @ :9    .  TIMe      CyclE ‚®± , ‚®±  sET :5  @ sesSioN    .  "¨Ç∑"    TO 7f    DEFAuLT ''      Ôºå ""   Ôºà ‚®±  )  As Ôºà ‚®± )  sEaRCH BreadTH fIRSt bY ‚®± Desc  nUllS FirsT   Ôºå ‚®±   sET _  @ "îìñ" @ "¶ìú"   .  "·ãã" @ ‚Ω§       CyclE ‚®± , ‚®±  SET #„Ñ±  @ fOrAll  . :88    .  ""    TO $1.4   deFaulT InterVaL '''' secoND  tO minute Ôºà Q'``'   )         ( ‚®± Ôºâ  For UPDAte waiT TrUe     wITH cheCk oPtion    )  At tiME zOne SESsIoNTImEzonE      MoD  - Cursor Ôºà wiTh ""   AS Ôºà ‚®± Ôºâ  search dEptH fIrsT by ‚®± AsC   Ôºå ‚®± NUlLs LasT    Set sYSTEm   .  :26        SELEct uNiQuE ‚®±  iNTO ‚®±   FrOm ‚®±  Ôºå ‚®±   whERE ‚®±  sTarT wITh ‚®±  ConneCT bY ‚®±  HaVing ‚®±    ORDeR siBLIngs By ‚®±    fOR updAtE NoWAiT    )  aT LOcAl      ** ‚®±              )   .  *     Ôºâ   )      paRtiTiON bY ( "" ( AlL )   =>  *   is of Ôºà "Ôªµ" @ "·®®"   .  DisAsSOCiATE  @ :5     )     And CurrEnT of  "" Ôºà ‚®± )       OR NoT *   noT  In  (  ‚®± Ôºâ       AS "" @ ""     , DEfAuLt  PCTuSEd      Ôºâ  NatUral JoiN  ‚®±    pivOt Ôºà NOt EXIstS  ( wiTH Ÿ£3  @ "" . DISABLe     ( VErsions  @ :#‡∞è  . "°úï"   ( + Ôºâ   Ôºâ  aS ( ‚®± Ôºâ    seLect ‚®±  INto rEtuRNinG  @ "" . :6       fROm ( ( ‚®± Ôºâ   PiVoT xmL ( ‚®± FOr "" @ FoReIGN  @ ""      In Ôºà Ôºà ‚®± )   "™ïß" @ "" . NONe      Ôºâ   )     Ôºâ ÔºÉ       , ‚®±  pARTiTIon bY Ôºà ‚®± )     GrOup BY ROLLUp ( ( ‚®± Ôºå ‚®± )    Ôºâ       hAViNG ‚®±    uNioN  Ôºà ‚®± )  fOr UpdATE SKiP lockeD    Ôºâ    and Ôºà  ‚®± Ôºå ‚®±  Ôºâ  NOT  in  Ôºà ( ‚®± Ôºâ  Ôºå Ôºà ‚®± Ôºâ  Ôºâ        As "" @ ""     , "„ä©" ( Ôºâ   =>  defauLT    FoR Ôºà "¨£è" @ "™ú∞" . :19   Ôºà uniQUe DEFAULT   , defAulT    Ôºâ   Ôºà + Ôºâ  , :60  Ôºà )   ( + )   Ôºâ    IN ( ( ‚®± )  uNIon  sElECt "©≥∑" @ :∆Ü7    =>  dEfaULT   , *     AND nOt ExisTS  ‚®±      falsE       into meRGE  Ôºà All ‚®± =>  nOT CUrreNt of  ‚®±    or TRAnSLatE ( ‚®± usInG ncHaR_Cs Ôºâ  At timE ZoNe sESsiONTimEzonE     ** ?  at local    MULtiSEt UNION  + ‚®± keEp Ôºà DEnse_RanK FIrSt OrDer SIblINGS BY ‚®± asc  NulLS lasT   Ôºå ‚®± DesC     Ôºâ  OVER Ôºà oRdER BY ‚®± AsC  nULls fIRst   , ‚®± nulLs LASt     )        -  - CONneCt_By_RooT ‚®±   AT TiME ZONE ‚®± WIThIN GrOup ( OrDEr sibLiNGs BY ‚®± NuLls FIRSt     Ôºâ       mUlTiSet uNIOn  xmlagg Ôºà ‚®± Ôºâ  at LOCaL         IN  ‚®±   aNd *   Is  nUlL         Ôºå ‚®± =>  DefaUlt  AS ""     )      FRoM jSon_tABlE Ôºà NoT EXiSTS  ‚®±   AND treaT Ôºà ‚®± As "" @ likE2  @ ""   .  :3  @ :_‚º∂  @ ""     Ôºâ   AT TImE zonE dBTImEzONE    MuLtIsEt UNioN DIsTINcT  ExTrACTVaLUE ( ‚®± PIPe      , *    Ôºå *    )  aT LOcAL     ** XMLQuery Ôºà nEW DePTh   Ôºà )   Ôºà + )      /  "®®∫" ( dISTINct ‚®± =>  ‚®±   Ôºâ   .  :_  @ ""   Ôºà + )  % foUnd        PASSing *   aS :9      rEtURNinG coNTenT )   at LOCAl    MUlTiSET uNIon dIstINcT  ExTRact ( hOuR FRoM daTe  ‚®±  )      ||  XmlCast Ôºà MUltIsEt ‚®± as rEf "°©≤" @ sCALe  . sPACe   Ôºà Ôºâ   ( DisTINct ‚®±   Ôºâ   ( + Ôºâ    )   MULTiSET UNIOn ALl  nUlL  At TiME zonE dBTIMezOne     ** deCoDe Ôºà ‚®± )  at TimE ZONE seSSioNtimEZOne    MuLTISeT InTerSEct  ‚®±       SUbmultiSet OF PRIor nQ'#¢∂Ø#'   at loCal                oR NoT Ôºà ""  =>  dEFauLt  As ""     Ôºâ  OVErLaPs Ôºà Default  AS ‘ø      Ôºâ         FORmAT JSON , "•°ä" @ ""     COLUMNs ( _$    fOr OrDINality   )  )  PIvOt XmL Ôºà SEssion  @ "" @ ""  Ôºà uNiQuE Ôºâ   =>  (  ‚®± Ôºå ‚®±  Ôºâ  ^ =  Ôºà Ôºà Ôºà ‚®± )  , ( ‚®± Ôºå ‚®± )  Ôºâ  Ôºå ( ‚®± Ôºâ  Ôºâ      or EXTrActvALuE ( ‚®±  , *    Ôºå "" @ :7     Keep ( DEnse_Rank last ORdER BY ‚®±    Ôºâ  OVer Ôºà PARtitiOn BY ‚®±  )     ** ( ‚®± Ôºâ At LOcal       -  PriOr ‚®±   MULtisET UNiOn  DeFErrAbLE  @ "†™´" . :8   Ôºà ‚®± )   .  *   oVeR ( ORdeR by ‚®± deSC     RaNgE CuRreNT rOw    Ôºâ   AT tIMe zone ‚®±     ** + ‚®±        Ôºâ  AT lOCAl      *  xMlaGG Ôºà ‚®± Ôºâ   muLTiSeT exCept DiSTINCT  SYs_coNNECT_bY_PATh Ôºà dIStiNcT ‚®± )   at tIme ZOne sESSiOntImEZone     ** caSE ‚®± wHEN ‚®± thEN ‚®±   END   muLtiSEt InterseCT AlL  "" ( Ôºâ   Ôºà + Ôºâ  WITHiN GRoUp ( ORdeR bY ‚®± NUlls LaST     Ôºâ  Over Ôºà Ôºâ   aT Local       -  tReAt Ôºà ‚®± As "" @ NoCopY      )   aT tIme zonE ?  aT Local       MULTIsET UNiOn  chR Ôºà ‚®± UsinG nChAr_CS )     *  "£íù"  Ôºà uNIQuE )    witHin grOUP Ôºà OrdEr SIBliNGs By ‚®± AsC     Ôºâ  oVer Ôºà paRtiTIoN bY ‚®±  Ôºâ    muLTIset EXCePt  PRIoR Trim Ôºà ‚®± FrOM  ‚®± )  At TIME zone DBTIMeZOne             and Not *   ÔºÅ =  ANy  ( ( ‚®± )  , Ôºà ‚®± )  )         FOr ( ROwcoUnt  @ "†Ø¢"   ( + )   Ôºâ    in Ôºà ( defAuLT  "©Ø≥" @ :1  @ "·íç"      Ôºâ   LOcaTor     )   )    aS oF PerIoD for ‡∫à2    beTwEeN      pARtiTiON By ( ‚®± AT lOcAL     ** xmLcast ( muLTIsEt ‚®± As INtERVAl Ôºà ‚®± Ôºâ   "§®Ø" ( UnIque ‚®± )   Ôºà )    To Ôºà Ôºâ   SuPplEMENtAL  ( UNiquE ‚®± Ôºâ   .  :_  @ ""  ( uNIQue )   ( + Ôºâ   rANGE ‚®± ..  ‚®±    )     /  "£ïß" @ coMPile  @ :56    .  *  Ôºà + Ôºâ      -  extraCt ( ‚®±  , *    )  at tIME zoNE sesSioNtImEZONE    mUltIset ExcEPt dISTInct  "‚óå" ( ‚®± )    WItHIN GrOuP Ôºà ordER sibLinGS By ‚®± asc     Ôºâ     ** trIM Ôºà ‚®± FROM  ‚®± )  At lOCAl         NOt  in  *      ANd NoT cuRrEnt OF  ÔΩªœß  @ "¨íÅ"   Ôºà + )     Or NOT eXISTS  ‚®±        Ôºâ  Join  XmltabLe Ôºà xMlnAmespACES Ôºà Ôºâ  , 5  COlUmns nOt exiSts  ‚®±   and CHr Ôºà ‚®± USInG ncHAr_cs Ôºâ    ** eXtrACt Ôºà secoND fROm daTE  ‚®±  )   mulTISET unIOn all  nChR Ôºà ‚®± Ôºâ  aT tIMe ZONe DBtImEZOne      /  - XMLQueRY ( ‚®± MultiseT INTeRsecT  ‚®±   mOD  ‚®±      PassING BY VAluE ‚®± muLTiSET INtErSecT  ‚®±  ** ‚®±       , ‚®± mUlTiSET UNion DiStINCt  ‚®±   /  ‚®± MULTiSET ExCept  ‚®±  ** ‚®± MUlTIsEt UNIoN ALL  ‚®±    -  ‚®±      as :__  ( UniQUE Ôºâ   Ôºà + )    retuRning CONTeNt Ôºâ   AT timE ZONe DbTIMEZOnE    at lOCal     ** ‚®±     ||  ?  AT LoCal     ** DECodE Ôºà ‚®± , ‚®± Ôºâ   mUlTIsET InteRSECT  tRaNSLAtE Ôºà ‚®± USiNg CHAR_Cs Ôºâ     *  pAssWOrd  @ STAtiC    Ôºà )    ovEr Ôºà pArTiTIoN bY "¶ìö"  =>  ‚®± As "‚ìó" @ "ë≤ã" . "¢∏ß"     , "¢àÜ" @ :8  @ lIKEC   Ôºà Ôºâ   =>  deFAULt     oRDer SiblINgs by ‚®± Desc  NULls fiRSt     )    mUltISeT ExcEpT  PRiOr NEW DirEcT_load   Ôºà dEfault    )     AT tImE ZoNE ‚®±     at tiMe zOne sesSIONtiMezoNE         > =  *      Or CurrENt of  "" Ôºà ‚®± =>  ‚®± :5     Ôºå DEFAUlt  UNLoCk      )   .  "" @ "Ø§ó" @ "´≥ï"  ( UNiQue ‚®± =>  dEfaULt    Ôºâ   ( + )    aND NoT INteRvAL '¢±ã' moNTh     MULTiseT ExCePT diStincT  :8  @ tImeZonE_hOUR  . ""    % FOuND  At lOcaL         lIke2  *   esCApe ‚®±       For ORdInalitY   Ôºâ  uNPIVOT Ôºà Ôºà LOCKeD  ( *          Ôºâ   .  *  Ôºà + )   Ôºâ   FoR ""  Ôºà uNIQUE )      In ( ( "™´´" @ :Œõ  @ :22   ( uNique ‚®± =>  NoT *   Is  NOT  nan      Or NOt ( ‚®± Ôºâ  OVErlaPs Ôºà ‚®± )         as "" @ :45       Ôºâ   ( AlL )     Ôºâ    , DeAllocaTe  @ "•âñ" @ BiNAry   ( aLL Ôºâ   ( + Ôºâ   AS DAtE ''      Ôºâ   Ôºâ    VERSioNS bEtwEEn tiMESTamp  cURsor Ôºà ‚®± )  aT TIMe ZoNe XMLAgg Ôºà curRenT Of  "" @ ·â´·Ω•    .  –ø      ANd CurrEnT of  "" @ "" @ ""  Ôºà DeFaULT  as TiMeSTAMp     Ôºå ‚®± As "" @ "" . "¶ïá"      )   ( + )     or not *   Is  INfINITe     aND not ‚®±  ** ‚®± MuLTIsET exCept DiSTINCt  ‚®±   MOd  ‚®± mUlTIsEt uNIon  ‚®±  ** ‚®± MultiSeT EXcept aLl  ‚®±      iS nOT Of tYpe Ôºà oNLY FounD  @ "´ôº" . :99     , ""  .  PuBLIc  @ LeADiNg  @ "ßÉ≠"    )        oRdeR bY EXIsts  ‚®±    oR ( ‚®±  Ôºå "®å£" @ :_    =>  DeFaulT  "üïç"     Ôºâ  OVerlaps ( :1  Ôºà dIStInCT ‚®± Ôºâ   =>  DeFauLt  as "¶úø" @ ""     , piPe   =>  Default    )      anD ‚®±   moD  ‚®±  ** ‚®± multiset EXCEpt all  ‚®±      NOT  LiKEC  *        nUlls fIRSt   Ôºå NoT ExisTs  ‚®±   anD NoT *   mEMbEr Of *          NulLs LAST     Ôºâ  aT tIMe zOnE ‚®±       MULtiSET UnIon  xMlQUery ( XMlQUery Ôºà ‚®± pASsING ‚®±   rETUrning CONtent Ôºâ    mULtiSeT inTeRseCt  "‚ÉÆ" @ :‹å4   ( dISTiNcT Ôºâ       Mod  coNneCt_By_rOOt ‚®±   MultISEt excePt DISTinct  CasE NoT eXiSTS  ‚®±   anD ‚®± iS OF ( tRUsTEd  @ ""   .  ""   Ôºâ        wHen ‚®± nOt  betWeen  ‚®± AND  ‚®±   AND noT ‚®± is not EMpTY        ThEN NOT (  ‚®±  , "ÆêÖ" Ôºà Ôºâ   =>  DeFAUlt    )  in  Ôºà ( ‚®± :1  @ "·à™" . "Í©ß"      )  Ôºâ     AnD ( ·¶∞·ªÖ   =>  DEFaUlt    )  OverLAPs ( ‚®± New     , _·àπ  @ ""   =>  ‚®± aS :1      )       or CURrent OF  "òòù" ( deFaULt   Ôºå DeFAULt    )   Ôºà DIstINCt Ôºâ      ANd nOT ‚®± betweEN  ‚®± AnD  ‚®±        end      ||  + ‚®± aT LOCaL      mOd  ( ‚®± IS EMPTY     AND NoT (  TriM  @ :_    =>  ‚®± "†ôç" @ COMpuTE  @ spLIT      , ‚®± aS "" @ :5  . "ñ§ñ"      )  < >  ( DEfAULT   Ôºå "¶©ø"  =>  ‚®± ""     )        Ôºâ AT TimE ZonE DbTimEZoNE     ** caChe  ( ‚®± =>  deFAuLT   , DEFAuLt    Ôºâ   .  "Ô∂´"  ( + Ôºâ  % BuLk_EXcEptions . cOunT         PAssInG *   AS ReTEnTioN  @ "" @ :#   Ôºà )   Ôºà + Ôºâ    retuRNiNG ConTent Ôºâ   At locAl     ** NuLL  at LocAL      MoD  CaSe dECOdE ( ‚®± Ôºå ‚®± )   mUltiSeT EXCepT  CasT Ôºà muLtisET ‚®± As vArchaR Ôºà ‚®± CHAR )     Ôºâ    ** trEaT Ôºà ‚®± As :_   .  nOKEeP     Ôºâ  . lOCkEd  @ "" . nOordEr    .  *         +  ‚®± At Time zoNE sESSiONtiMEZOne         iS  not  nuLl     And nOt CuRRent of  "" @ :6  . KEEp_duPLiCAtEs    Ôºà + Ôºâ     OR noT tiMEsTAmp ''''     ** "¨º≠" Ôºà AlL ‚®± =>  ‚®± AS "" @ :4       )   ( "¶ãï" @ ""  ‚®±  =>  DEFAUlt  ‡πí      )   Ôºà + )  % BULK_ROwcoUnt ( ‚®± )    AT LOCAL       ||  Ôºà ‚®± ) AT LoCal      /  prOfile    Over ( Ôºâ   aT loCaL    MULTIset ExcepT DistInCt  XmLAGG Ôºà ‚®± ORDER sibliNGS by ‚®± ASc     )        =  ANY  Ôºà ( Ôºà extRAcT  @ :1   Ôºà ALL )   =>  ‚®±   Ôºâ  )  )       when EXistS  ‚®±      then NOT *   IS of TYPE Ôºà OnlY "°©¶" @ ""   .  "" @ "õ≤ì" . Ô∞Ø     , "·∏§"  .  :8  @ :2     )     AND curREnt of  COmPIle  @ ""   ( + Ôºâ     or noT *   noT  LIKe  *   EsCApE ‚®±    aND cURrenT oF  "≠≠à" ( DIStInCT Ôºâ   .  SessIon  @ :#$  @ "ßÉ≤"   Ôºà + )        eLse nOt Ôºà  ‚®± AS "ëÑû"    Ôºå dEFaULt    )  ^ =  Ôºà ( ( DaTAbASE  ( Ôºâ   =>  DefaULt  As :#3     Ôºå DefaULt    )  Ôºâ  Ôºå ( "ò•≠" @ "" . aUThid    =>  dEFAuLT  rOwid  @ thAn  . ""      )  Ôºâ          eND  at TiME zonE dBTIMEzoNe       -  trIM ( trailiNG "" ( Ôºâ   Ôºà + Ôºâ  % noTFound  AT loCAl     ** TREAt ( ‚®± As Ref "Æùñ"  .  œ¶  @ "" @ :12      )      /  trIM ( ‚®± Ôºâ  aT TIME zOnE sesSIoNTiMezONE    MUlTISEt unIon  - ‚®±   ** Extract Ôºà ‚®±   Ôºå ‚®±  Ôºå ‚®±  )  aT time ZoNE dBtImezONe         nOT  iN  xMLAgG Ôºà ‚®± )   MulTiseT UniOn DIsTiNCT  ExcEPtiOnS  @ :1  @ "Æñ∑"  Ôºà diSTINCt ‚®± =>  ‚®±   Ôºâ    KEEP Ôºà DeNse_raNk LAST oRdEr SiBlingS BY ‚®± nullS LASt     Ôºâ   aT LoCal      /  CONnEct_BY_RooT ‚®±    ** XMlaGG ( ‚®± Ôºâ  At TiMe ZoNe ‚®±            and eXIstS  ‚®±      fRom  NOt ""   wItHin GrOUp Ôºà oRDeR by ‚®±  Ôºå ‚®± ASC     )     ** casE When ‚®± THEn ‚®±  else ‚®±   eNd   muLTISet INtERsECT  xMlcaST Ôºà ‚®± aS NaTIoNal CHaRacTEr vArYIng ( alL ‚®± stRiNg      )    RaNge ‚®± ..  ‚®±    Ôºâ  aT LOcAL         < >  SoMe  ( Ôºà :3  @ ·ÄºÔ∞ö  @ varraY   Ôºà ‚®± Ôºâ   =>  ‚®± as "†≤Æ" @ "Ô≤©" @ ""      Ôºâ  , ( ( ‚®±  Ôºå DEfAuLT  as "ßúº"     Ôºâ  Ôºå ( ‚®± , ‚®± )  )  Ôºâ    aND Ôºà ""  =>  DEFAUlT  XMLtable  @ "" . ""     Ôºå "" @ :#Ôæπ    =>  deFaULT    )  oVerLAPS ( ‚®±  Ôºå CommiTted  Ôºà Ôºâ   =>  dEFAULT    Ôºâ         Ôºâ   mulTiset excePT DIStINCT  sYs_connecT_BY_PatH Ôºà uNIqUe nOt exists  ‚®±    oR not eXtRaCt Ôºà SeCoNd From ‚®±  )             "ßåç"    Ôºå "êê±"  =>  CuRrEnT of  :÷§  @ ELsIF  . :9   ‚®±  Ôºà + )    aND Ôºà ‚®± )  oveRLAps Ôºà ‚®± Ôºâ       or noT CUrsor ( ‚®± Ôºâ  At tIMe ZOne ‚®±      *  CHr ( ‚®± uSiNG NchaR_cs Ôºâ  At TimE ZONE ‚®±    mUltIsET unION  CasT Ôºà MuLtiset ‚®± aS LONg ‚®±   % TYpE    Ôºâ    ** NEW "†≥ö" @ "" . :86    ‚®±    At LoCAL       -  - ‚®±   ** new "ó¶£" ‚®±  ‚®±     MULtISEt eXCEpT ALL  CONnEct_bY_ROOt ‚®±  At LOcAL         BetWEen  *   AnD  TraNslAte ( ‚®± USinG cHAR_cs )  At lOCAl    muLTIseT uNIon ALL  oiDINdex    oveR Ôºà PaRTition BY ‚®±  )              as "" @ "" . ""      Ôºâ   aT tIME zoNE SessIOnTIMezOne     ** TrEAT ( *   IS noT oF Ôºà :4    Ôºå RoW  @ MinVAlue  @ ""    Ôºâ     AnD NOt *   iS  nan        AS #  @ :33  . "°Öá"   .  Mod     )    MUltIset except  n''   at tIMe zONE sESSIOnTImEZoNe      moD  PRIOr ‚®±   At tIme zOne dbTiMEzOne    MUltiSet excePt  + cAsT Ôºà cuRrENT OF  :2  Ôºà DistiNCt )   ( + )    And *   lIkE  ‚®±           AS dOuBle PRECiSIoN  % tYpe    )  AT tIMe ZoNe dBTImEZOnE    AT loCAl         anD *      as "´µØ" @ "" . SUpPLeMenTAL       On NOt exiSts  ‚®±    oR noT #  @ deaLlOcate  @ ""   ( + )    ** cURsor ( ‚®± )  at lOCAL    MUltiset inTErSect all  ?     /  :37  @ "≠∑ã"  ( DIStInCt dEfAUlT   , ‚®± =>  ‚®± aS ""     Ôºâ   .  "‚≠Å" @ tables  @ ‡¶û1   ( deFAuLT   , ‚®± =>  dEfAuLt    Ôºâ    KeEP ( Dense_Rank last ORder By ‚®± dEsc  nUllS fiRsT   Ôºå ‚®±    Ôºâ    mULtIsEt unION DisTINCt  Sys_coNNeCT_By_pAth ( ""  =>  DEfAULT   , encRypT   =>  ‚®± "ìáó" @ ""      )   aT locAL     ** 8.d    MUltISET UNIOn  "" @ "" @ :34   Ôºà UniQUe Ôºâ    % BulK_ROwCOuNt  ‚®± )          iN  (  ‚®±  , ‚®± AS :#9      Ôºâ         piVoT  default  "" @ JSon_TABLe  @ "¶ìî"      foR  ""  )   .  *   + Ôºâ   Ôºâ    in  aNy   , BYTe  @ BinARY     uNIQUE Ôºâ    at Time ZOne sESSiOnTIMEZOnE    MUltISEt inTersecT  EXtRaCTvALUE  :14  @ "üÖÜ"   ‚®± Ôºå ‚®±  )   =>  ‚®± ""     , *    Ôºâ          AND NoT ExIsTs  ‚®±           Ôºâ      cONNeCT bY NOCyCle not *   LikE2  + ‚®± at TImE zoNE ‚®±     MULtIsET iNterSeCT DIstInCt   ‚®±    ** xMLcAst  MulTiset ‚®± as some       +      AT lOCal       ||  NEW ""   DefaULT   , DeFAUlT  AS :Ôæ≤  @ PIPeLIneD             mULTISET InTerSECt  "„âÉ" @ "" . "ò™å"    +   OVeR  PartiTION BY default   , "óÉü" @ "Íûú" . :4    ALL ‚®±    =>  ‚®±    ORDEr sIblIngs bY ‚®± Nulls LaSt   , ‚®± asC     rows BetwEEn ‚®±  folLowiNg  aND UnbOUndeD pRecEdiNG       AT TIME zoNE SEssIONTImEZONE     ** DECODE  ‚®±   AT LOcal      mOD  NChr  ‚®±   At tIMe ZONe dBtIMEzoNE    MuLTiSeT EXcEPT ALL  :·†°·Ö∑   dIstinct    .  ""   oVEr  oRDER siBlIngS by ‚®± ASc     rAnge ‚®±  FolLoWing         ** tRIm  ‚®±    MULTiSEt iNtERsect  perIOd  @ OuTEr     All     +            or NOt  "‡¥ø" @ "" . :6    ‚®±    =>  ‚®±     OVerLaps  dEfAuLT  :√©     Ôºå deFauLt  aS "™≤â"                 WITH read OnLY  ConStraINt TRiM   diSTINct               Ôºå jSoN_TAbLE  ExIsts   SElECT erRoRS   =>  ‚®± AS ERrOrs  @ "" @ "™õÜ"     , dEfauLT     bUlK COlLeCT INtO "" @ :60  . ""    +     FROM thE  ‚®±   as oF TImEsTamp  "" @ DEallOCAtE  . _ƒî    DISTInCt    =>  ‚®± "ßØá" @ ""     , ‚∂µ   =>  ‚®±      :#     PaRTiTIon By  ‚®±     NaTural FuLl  join   ‚®±    partiTION By  ‚®± aS "" @ SOrT      , noExtenD  @ :9    =>  deFAUlt        Unpivot ExclUdE NulLs  "ßàÖ"       fOr reLIEs_On   DisTINcT ‚®± =>  deFAUlT  :’ñ4     Ôºå DEFaulT        "≠ê∑"  =>  deFaULt  AS ""    , :76  @ :1  @ "•§ê"   =>  ‚®±         In   #8  @ ""   UNique     +   , "ë¢∏" @ "•∂¨"   ‚®±       +       As  ''   Ôºå 9.3       Ôºå CaScAde  @ tYpE  . ""     aS Date 'íâ¶'               cONNect BY NoCYCLe ‚®±  STart WItH ‚®±  hAvIng ‚®±  GRoup bY       Ôºå  RoLlUP  ‚®±  , ‚®±                  unIoN   ‚®±        aND nULl   muLTISeT UnIon DiStiNct  cAsT  ‚®± As LOng RAw           -  "†æù"  .  ""      +   witHiN GroUP  oRDER by ‚®± AsC       OvEr     AT LocAL    MULtiset excePT DISTInCT  treaT  ‚®± AS rEF ""       at loCaL      MoD  TrAnSLATe  ‚®± UsiNg CHAR_Cs   At tIME zONe DbTImeZOnE         ÔºÅ =  "£ëá" @ "" . :70     % nOTFOUND   MULtisET InTErSeCt  CAse wHEn ‚®± tHen ‚®±   end  At LOcAl     ** exTRaCt  sEts   =>  DEFAult  wOrK  @ "" @ :79       , *      AT TIMe zonE ?        Mod  ConNECT_By_ROOt EXtRacT  daY From dAte  ‚®±    aT lOcAL                coluMNS  LocAtOr  @ _     IntERvAL  tRansaCtion   ‚®± =>  nOT currENT Of  ‚®±   aND EXIsTS   WiTh "†•ß" @ rEbuILD      ‚®±    As  ‚®±      ‚®±   miNUS  seLect DiSTiNCT ‚®±  into ‚®±   froM BatCH   .  "·ö∞"   SUBpARTITion  ‚®±   sAMPLE bLOck  ‚®±     CrOss joIN  :·Ä©·°©  @ ""    SAmPlE  ‚®±   sEED  ‚®±     VerSiONs beTWEEN tIMESTamP  *   aNd *     PIvOt XmL  ‚®± fOr  ‚®± Ôºå ‚®±      In ‚®±        PARTitION bY  ‚®±   Join  ‚®±   unpivot inCLude nuLlS   ‚®±     foR  ‚®±      In  ‚®±            whEre ‚®±  StArt wItH ‚®±  cOnNecT bY ‚®±    orDEr by ‚®± NuLLS fIrst   Ôºå ‚®±    FOR updaTE oF  ‚®±                 +   To  "õÅÆ" @ SuBpartiTIOnS    all dEFAULT  #Í††     Ôºå nOt CurREnT oF  ‚®±   ANd NOt  ‚®±   mulTISeT eXCept dISTINct  ‚®± % NOTFouNd     *  sys_coNnEcT_By_PatH ‚®±  aT LOcAL     **  wITH "òò´"   aS  ‚®±   SearCh DEPth fIRST bY ‚®± dESc  NulLS LASt    SET "óÉ¢" @ "" . "Íñù"      CYCle ‚®±  sET "óêç" @ inNEr      to 0X    deFAuLT ''''        ‚®±   mINuS  sELect ‚®±  fRom tablE  ‚®±      , ‚®± as of PEriOd FOR ‚®± ‚®±         sTArT wITH ‚®±  ConneCt By ‚®±  HavINg ‚®±  gRoup bY  GRouPING SETS  CUbe   ‚®± , ‚®±                      fOR UpDATE noWait      at Time ZOne ‚®± KeEp  dENSe_RanK LAsT ORDER SiBlIngS bY ‚®± Nulls LasT                 iN    ‚®±        As :5         .  *           AS ‡πã  @ "£∂∏"     parTiTiON By    ‚®±    NOt  iN   sELeCt AlL ‚®±  bUlK cOLleCt IntO NOvalidAte    +     fROm xmLtAblE  faLsE   coLUMNs ‚®± raw  DiStiNCt     cHARACter set ‚®±    PaTh 0XB   DEfaUlT ‚®±      iNNeR jOiN  :29    UnPIVOT inCLUde NULLS  "§†°" @ :_0    ‚®±      foR  "üÜö"               IN  rejeCT  @ "®Üú"   .  *   +    aS n'™Ü∑'             as of SCN  ‚®±      On ‚®±   UnPIVot EXcLudE nULLS  "°ô≥"  uNIque ‚®±     DisTINCT ‚®±      foR :5  @ TRANSLAtE    .  *   +     in  ""      +              WhEre ‚®±  GRoUP bY  ‚®±         hAVinG ‚®±    ORder siBlINgs BY ‚®± nUllS FIRSt     wiTH reAd oNLY  cOnsTRAiNT :3  @ ""                     CoNnecT bY nocYcLE - tRIM  ‚®± FROm  ‚®±   At TiMe ZONe SesSIONTImezONe          iS A SET         STARt WiTh nOT *   iS  not  inFINIte         GrOup bY                 HAviNg *   iN   wItH "™†ô" @ "≠°µ"    As  ‚®±   seArcH dePth FiRsT bY ‚®± DeSC  nulls lASt    seT ""        ‚®±   ordeR by ‚®± ASC     WitH cHEck OpTioN  ConstraInT :#‡®•  @ ScAlE                    as Ref "" @ RECoRd    ‚®± =>  DeFault         % Type      At Local     ** XMLQUERy  CUrsOR   WITH InSTantiAbLE  @ ""     TRUSTED   .  "" @ ""   UNiqUE nOt XMLQuEry  ‚®± PasSING BY VALue ‚®± aS ‚®±   rEtuRnINg COntEnT    At TIME zONE dbTimeZONe     ** DEcODE  ‚®±   at tiMe ZoNE seSSIoNtImEzonE              ""         +      as  ‚®±   SEArcH dEpth FirsT BY   :7   dIstinct ‚®±     =>  ‚®± AS ·åØ0  @ sERIAlLy_ReUSAbLe         iN   ‚®±           SEt :9  @ "™ç¢"      cYcle "¶™Ñ"   unIqUe      SeT :Ô∂Ñ     To Q'^·áÆ^'    dEfAuLt tiMEsTAMP 'óâå'        ‚®±   fOR UpDATe OF  "´æâ"    SKIp LOCkEd   WITh ChecK oPTIon  CoNsTRaint DAtabase  @ :6            ordeR bY  :·ø≠·æÉ   =>  DEFAUlT  "ñ´ó"       OverlaPs  deFAULt             nuLLs FIrSt        aT lOcAl         PasSInG bY ValUE "" @ TiMezone_REgion    ‚®± =>  noT *   bETweEn  *   and  *        aS "" @ ""          UnIqUe     +   % iSoPEN    ** TrAnslaTE  Not   DeFauLt      < >   ""  =>  ‚®± ExeCUTe  @ "‡º†"              usiNg nchAR_CS           retUrNing CoNtENt          ESCapE Not curRenT oF  neveR  @ ""   .  *   +                    all        AS  sELeCT alL defaULT     iNTO #  @ BeFORe        +     fRom xmLtABlE  xMLNaMeSpAcES    , TruE   pasSinG "†Ö§"  =>  :2  @ _9    DefAult  as "üÇä"        .  "ìáã"   WitHIN GroUP  oRdER By NeW MAx  @ ""    +          IS of tYpE  only "" @ :5             asC  nulLS Last        at LOcAl         < =  AlL    ‚®±   fOR UPDATe  oRder SiblInGS By *   nOT  lIkEc  triM  TRaiLiNG fRoM  ‚®±     ** CasT  MuLTISET  ‚®±   as opaQuE fIXed  unIQUE dEFault  LONG        uSIng lIbrAry "ëñî"     .  *       aT LOCal         esCAPe ‚®±       ASC     WitH rEad oNLY                 veRSions perIOd FoR "ó±π"  all    .  *   +   BETWEEN  *   aNd + - ?   aT TIme ZoNe XMLAGg  nOT EXisTS   sElecT UNIQue OVeRLaPS  @ ""   :_   DISTInCt ‚®±    =>  dEfAuLt  aS "≠¢£"        =>  ‚®±      NOT  BETWeEn  *   and  *           FROM the  ‚®±    PARtiTIoN bY  DEfAuLt       pivot  exISTs   ‚®±        as ""     foR  "†í∂" @ :4          IN  ‚®±          wherE NoT ‚®±      is OF  exCEPt  @ "ó£ò"             cOnnect bY nocYclE CurreNt of  "" @ ·ªÉ           groUP By  ROLlup   Not cURrEnT of  retUrNInG  @ :7        UNIQUE     +                                orDER SiBLIngs by NOt *   BETWEEN  *   anD  *             aT time ZOne dBtimEzONE         ** CAst  MatCHed   "™°è"  =>  Not EXisTs   wItH Nchr  @ "óåô"    As  ‚®±   CYClE BeFOrE  @ :60     +    set ""    TO InTErVAl '''' daY  1.3E1f   Ôºå q'&¢§§&'         defAult DaTe 'õ∞á'       select ‚®± :43  @ "ñ¢π"       INTo ""  UnIqUE ‚®± =>  ‚®±             fROM  ‚®±    lEFT oUTeR  JoIn  xMLtaBLE  ''   pasSINg By vAlUe defauLT     COlUmNs ‚®±  TrUE  Ôºå TRue   raNge ‚®± ..  ‚®±    dEFaULT ‚®±      PArtiTioN BY  LEVeL   =>  DeFAULT  as ""       innEr JOin  ‚®±  uSInG  "¶Ç≤" @ ""   distIncT ‚®± =>  dEFAuLt  :—ü         .  *   +      piVOt XmL  Ô≤æ  @ afTeR    ‚®±    =>  ‚®± :5  @ ""      FOR  ExcePTIOns   .  ""  AlL          in  Any            WheRe ‚®±    FoR updAte  ordER SiBLings by ‚®±    wIth read ONlY                 kEEp  DEnSE_rAnk LAST oRder BY Exists   wiTH "Æ™í" @ _‡¶•     aS  ‚®±   cYclE :6  @ "‡≠Æ"    +    sET pOLYMORpHIc     To .6e5d    DefaUlt False        ‚®±   ORdeR sIbLINGS By ‚®± dESC     FOR uPDATe Of  ""  all     ‚®± as "ßπ≤" @ jsON            wait TiMeSTAmP ''             aSc  NulLs LAST       oveR  PARTiTIOn bY "¢Çê" @ "©†¶"   =>  dEfAUlT     ORDer BY not xMLcAsT  ‚®± as IntERVAL  :38   "" @ exPIRE    =>  ‚®±       +   tO  UNiquE DEFAUlt       "≠∏é" @ :Ô¨Ñ    DiStiNCT             aT locAL     ** nChr  ‚®±         IS Not of tyPe  "Íì§"           nulLs LaST     Range bETWEen curReNt rOW  AnD NOT *   is A seT         fOLlOWiNg             Is  not  nULl        AS timESTamp  aLl    WITh  DefAulT  as SUbSTitUtABLe  @ "ëö†"         lOcAL  TimE   :#5  @ Low    =>  dEFAulT  #        OvERlapS  DEcOde  ‚®±   AT TImE ZonE sEsSiONTimeZoNE         IN   SeleCT AlL ‚®±  BulK cOLlEct intO "¶Ø±"  AlL ‚®±    .  :7      fROm jSon_tAbLe  ‚®± ForMaT JSOn coLumNs  "´≠Ç" @ ""    exISTS PAtH SampLe  @ "£ìÖ"           uNPIvoT inCludE nUlLs   :2  @ cuRRent_usEr    disTiNcT     +       fOr  "óÄû"   +        in   pAraLLEl  @ lOCking         aS 7e-4f              "" @ ""     CrOsS jOin  jSOn_tABle  ‚®± Ôºå :#Ôµ¶     COLUMNs  ""   INTeRvaL  sesSIOntIMEZoNe   ‚®±     UnIqUE ‚®±     +   tO  "" @ ""    +    CHAracTeR Set ‚®± % cHArseT     EXIstS       PIVOt xML  ‚®± fOR "¨é´"        IN  ‚®±        As of pERIOd FOR WRAppEd  @ :#6         BETween      pArtITion BY  ‚®±   NatURal iNnER jOIn  ‚®±     wHerE ‚®±  stArT WiTh ‚®±  CoNNECt BY ‚®±  GRoUP by GroUpInG setS                wIth cHEcK oPtiON                           ZoNE  AlL        AT timE zone dBTiMezoNe           uNPIVoT  ""  alL     +    fOR  "¨éá" @ ""   AlL DEfaulT  ""        .  ""   +        in  :2                   PARtitION by  MAXvALUe  @ "®Ä≤"   ·É¥   =>  not ExISTS   WIth :4     "" @ AccoUnt    ‚®±    .  *   +      as  ‚®±   sEaRch bREADTH FiRSt BY xMlcasT  MuLtiSet  ‚®±   aS Opaque FIXeD  UNIqUe   UsinG LIbrArY :7  @ SchEMA    diStInCT           ** ''   aT loCAL         Not  beTwEen  *   anD  *        DeSc    seT ·†∂4  @ "®†∂"        sElect ‚®±  FrOm  jsON_TAbLe  NoT   ‚®±    ~ =   ‚®±         , 0x    COlUmNS  ""   FOrMAT JsON WiTHoUt aRRAy WRaPPER  PATh iNtERVal '' MinUTE           vErsiONs PERIOd FOR "üÅá"   +     ‚®±    nOt  iN   ‚®±          ?        and *       JoIN  ‚®± oN Not cuRrENt Of  :8  @ :_Ô≥á    .  ""  ‚®±               PARtiTION by  ‚®±    pIvoT Xml  ‚®± fOR "™ì∞" @ "¶ìì"    ‚®±     +     iN  ‚®±          HAviNg + "©Üò"     .  *   +   wIthin GROup  oRdeR SiBlINgs by ‚®± NULLs FiRST        AT TIME ZOnE exTracTvalUe  ‚®±  Ôºå ‚®±  ** ‚®±       , *            ** pRiOR  ‚®±   At LOcAl     At LOcAL         IS nOt OF  ONlY coALEScE  @ TABLES                OrDEr bY trEAT  ‚®± aS ref STAtiC              in    ‚®±        DeSc  NuLLS firSt             aS "" @ ""         =>  cUrrent oF  :28  @ evALUATE    diStinCT          json_TAble        NAtURAL INNER jOIn  xMltAblE  xMlNamEsPaCes  DeFAULt    DEFauLT n''     , TRuE   cOluMNs NoT exIsTS   wITh "¶è£" @ ""     :3   .  "¶ñÉ" @ XmLnaMESpaces    ALL noT nULL  at tIMe zone u   DisTIncT     % BUlk_ExcEptiOnS . CoUNt            ~ =  *                 aS  ‚®±   SEaRCH dEPTh firST By NOT *   <  *        DEsc    SEt :·É©‚∫õ  @ "•∞Ø"         ‚®±   WIth CHECk oPTioN  ConSTRaint RESTRIcT_REfEReNces  @ StATeMEnT              ""  FuNCTiON   =>  dEFAUlt        +        unpiVOt eXCLUde NuLls   "" @ ""    +       fOr ""  deFauLt  ""               in  "" @ :9    aLl ""  =>  NOT ConnEct_by_ROOT CaSE curreNt OF  partial  @ #1    UNIqUe          ELSE *   iS  NuLl          enD  At lOcal     at TIMe zoNe SessIontiMEZoNE     ** TReaT  NOT  deFaULT      OvErLaPs  :85   ‚®±    =>  ‚®± as "·ãê"              As ReF "" @ _0        . :·°á    UNique     +           Not  likE2  "™∫ü" @ ""    +     ** NulL  AT LOcal                    uNIquE      aS  7               aS xmL  @ "≈Ö"       PivOt  exISTS   SeLect "" @ "¨•¨"   =>  DEfAUlt  as "™ûá"      buLk CoLleCT into BreadtH  @ #    defaUlt        +     fRom  ‚®±   aS PERiod  @ :2      NatURAl leFT  joIn  ThE  ‚®±    PartITioN bY  :_·Üì      =>  DEfaULt  As OPeN        fuLL OUter  JOin  json_TaBlE  not *   NOT  LikEc  "" @ "£ä¥"    OVER  paRTItiOn By :4   =>  DEFaulT     orDeR bY ‚®± NUlLS FiRSt        At tiME zONe XMlquEry  *   pasSiNG BY Value record   .  *   +   % bulK_roWcOUnt  ‚®±             rEtURNING cONTENT                  FOrMat jsoN cOluMnS  NEsTed patH coLuMn_VAlue  @ "•¢¶"     coLuMns  "¢ëí"   foR OrdiNALity           uNPIvot eXcLUDE nuLLs  "‚îú" @ :33    uNIqUE   ‚®±    IN   ‚®±         aS ShARIng           FOR  "" @ :3    *   NOT  BeTWeEN  DOuBLE    OVeR       ** sys_cOnnECt_bY_PAtH           AND   ‚®±  at timE zoNe dbtIMeZoNE     ** EXtraCt  mOnTH FROm ‚®±    aT tiMe zoNE SESSioNtIMeZoNE              "™üî" @ Œï»ì           +        IN   ""   +                  usInG  ReDUced   aLL "" @ "£¨Å"   uNIque    =>  deFauLT       .  INstaNcE  @ "°†è"          whErE nOT exIsts   ‚®±         conNect bY Not *           wITH CheCK OPtIon  coNSTrAInt ‚≤ü‡¨è               fOR :7  @ "≠îì"         In   ‚®±   ORdER by CurrEnt OF  "üÉï" @ OVerrIDINg    DisTIncT NOT *        vArCHAR  @ :2           +           fOR UpDAte Of  "" @ "§ì¥"     skiP lOcKeD             starT WITH NOT CuRReNt of  foRALl       +         COnnEct bY priOr NUll    aT LocAL         LiKeC  *   escaPe Not ExIsTs   WitH "ßµá"   As  ‚®±      ‚®±   FOR uPdAte Of  :#7        +    SkiP LockEd   orDEr sibLiNGS By ‚®± aSc  nuLlS fIrSt                    haVinG  noT *   NOt meMBeR oF case ELse ‚®±   EnD  AT TiME ZoNE SEssionTIMEZoNE     ** CAsE ‚®±  eND                              FOr UpdaTE  WItH REad oNLy      searCH DepTh FIrst BY   "Æ£ê"  *   ^ =  nCHr  ‚®±   at lOcal     ** XmlcAst  ‚®± aS OpaqUe fixEd  unique ‚®±    UsiNG lIbRAry "´£Æ"   All ‚®±       raNge ‚®± ..  ‚®±                 aS mAx  @ :Ô∞ú          =>  nOt cuRReNT of  "†¨Ö" @ ""             >    seLeCt statIc   UniqUe    =>  DeFAULT  ""      frOm  TABlE  ‚®±   AS OF scn  dEFauLT      PIvOt  :82  @ "§é´"   =>  *   < =  CONneCT_BY_roOt Raw  @ :21     +   % bULk_EXCEPtioNs  ‚®±   . ErrOR_iNDEX     AT lOCAl     ** dEcOdE  ‚®±   aT LocAL                FOr  "òêï" @ :8        +        in  Any            partITIoN By  "¶Å∫"  =>  nOt CurReNt of  ""  dISTINcT                 unpivot   bYte  @ "ó≥®"   All DefauLt  as ""         +       FOR NooRDER  @ :#    DEFaulT  reLationAl            In   "°Ñø" @ "°íû"   .  *       As  tImEStaMP '´∞æ'                 PartITioN by  ""     =>  NOT ExISTS   ‚®±             uNpivOt InClUde NULlS   ÔΩª#    +       FOR PReCisiON  @ ""    DIstinCT "¨∞∑"  DEfAULt  as :7  @ fOrmAT          =>  SYs_COnNeCT_BY_PatH  UNique :_  @ :23   ‚®±  =>  dEFAULt             is  INfiNiTe        "" @ ""            in  ""     .  *   +              WHere  ‚®± "" @ aLLOCATe         OvERLApS  "" @ ""   =>  DEFAUlT  "óéÖ" @ "ìê®"                cOnneCt by NOcyCle *   IS  nUlL         STart With nOT  ‚®±     OVERlaPs  DEfaulT                foR uPdAtE of  :25     WAIT NQ'""'     OrdeR siBlINgs BY Not ExTrAcTVAlue  ""  aLL    =>  ‚®± As BuFfEr_pOol  @ :·πõ›ó       , *    Ôºå *      At locAL     ** ?  At TIme ZoNE sessioNTIMeZoNe         is eMpTy           WItH ReAD OnLY  cOnSTraINt CoLuMN_Value  @ OpTImAl         WItH checK OPTioN            aSC    SEt "" @ "†âû"      CyClE "" @ "îî∑"    +    SeT "£Øá"    To u'™¥µ'    DefaULT datE ''       selECt unIqUe defAUlt  as ‚æè0       INto SEtS  @ ""         frOm :7     nATUrAl INNeR JoIn  JsOn_TaBLe  not 0x0         suBMuLtisET Of *          Format jsON COLuMNs  NesTed 2   ColuMnS  "òéê" @ aTtriBUtEs     LOng raw    % RoWTyPE    TrUNcAtE FORMAt jsoN           VeRSIons PerIOD For #Œâ    +   between  tRANslAtE  not  "‚â¥" @ DeBug    =>    ‚®±     =     ‚®±             waiT        OveRLAPs  ""  all :56  @ :#5    unIQUE    =>  dEFAULT       =>  *   IS OF  onlY LEVeLS            As "¢¶ö" @ ""               uSing ncHAR_Cs     ** traNsLATE  Not cuRReNt Of  ‡¥∂‚Ω§   .  "óÇ™"      +        UsinG nChar_Cs   AT TiME ZONe DBtiMezONe         ANd cUrSoR  SELeCt ""  =>  - - ‚®± at LocaL          not  iN  *            BULk cOllect InTO PasSWord  @ "°Éë"   Not XMlAGG   deFaUlt      oVerLAPS  DeFAUlt  "òãî"                at time zone caSt  mUltIset  With "·¶û" @ :29      :5  @ SerIaLizABLE    alL ‚®± =>  DEfaulT        "†í≥"  =>  dEfaUlT        +      AS  ‚®±      ‚®±   oRder bY cuRrEnt OF  "‡∑¥" @ "ò™Æ"   ALL ‚®±            nulls First        AS NVARCHAR2   rAnGE noT ‚®±           ..  eXIsTs   SelECT aLl :Ô∫Ø   =>  ‚®± aS #       frOm XMLTabLE  INTErVAL '' HOur  tO hoUr  dATe ''''   Ôºå TimeStamp ''''        PasSIng ‚®± aS TIMEzonE_HOUr  @ ""          as lOB      PiVOT XML  deFaulT    fOR  ROwDEpendENCIES  @ :74     +        In   "ß∫∂"     =>  ‚®± "¨¢é" @ cyCLe                    StarT wItH ‚®±  conNECt by NOCYClE ‚®±  hAVIng ‚®±    for UpdaTE Of  MaXTRAnS  @ ""   unIQUe    .  *    skIP LocKEd                At Local        ** nuLL        nOt  In  *              .  *     FrOM  ‚®±   aS of PeRiOd for "¢∫ì" @ "≠èà"   dIStIncT DEfAult  AS "‚Æ¨" @ :9           uNIqUe staTISTiCs   =>  dEFAuLT        bETWEEN      paRtITiOn by  "©™ï"     =>  nOT *   LikE  *   EsCApE NOT currEnT Of  "" @ :90     +              _  @ VALue         cROSS jOiN  ‚®±  PIvOT XML  DEfaUlT  As "êπº"     FOr :‡´ø   wRapper  @ ""   =>  DEfAuLT              In  AnY            wHErE noT ExTraCT  timEzONe_aBBR From dAtE  *   BETWeEN  xmlagG  ‚®± OrDER bY ‚®± DEsc  NulLs FIrst       At LOCAL         aNd   witH :8    AS  ‚®±   seaRCh brEadTH fiRst By ‚®±   seT :8      CYcLE "©éï" @ "©ê¥"   .  #   uNiQue ‚®± "" @ ShardEd           +    Set hOUr  @ ""     TO ''    DefAuLt TRUE        ‚®±   wiTh rEAd ONLY  COnsTraiNT format          ** "" @ ""    dIsTInCT     +   % foUnd                AT TiMe ZoNe DbTIMEZONE     ** nEw "ù©û" @ ·çÄ‚¥Ö    aLL     :3   =>  deFaUlt               BEtweEN  *   anD  *           fOR UpDate skIp lockeD      at tIme ZOne PRiOR "•Ø∑"     .  aT  @ ""    WithIN gRoup  ORdeR bY NOt eXISTS   WITH :9  @ ""     rEdUCeD  @ ByTE    exisTs   wITH ""    ""   unIQUE "™∑ê" ‚®±  =>  DeFAULT        +      as  ‚®±   sEARch depth firsT BY ‚®± NUllS LaSt    seT "™¶Ä"        ‚®±   oRdeR BY ‚®± deSC             :#  @ dEbUg          .  *   +      As  selECT aLl ‚®±      lIkE  ‚®±  ** ‚®±      escApE ‚®±          BUlk ColLeCt InTo "òäí"  DIstiNCT    .  ·πû  @ :76    ""  =>  DeFauLt  aS "" @ "°ê∂"            from  ‚®±    INnER joiN  ‚®± ON EXisTS   ‚®±            StaRT wiTh Not   DeFAuLT      IN    DefAULT  xmLnAMESPAces                 ConNEct bY NoCYCLe nOT ‚®±      NOT suBMuLTiSET of *           GrOup By GrouPiNg SetS                WItH REAd OnLY      CYCLe ANALyzE  @ "õã†"     set ""    tO 0x    DEfaUlt 1.e6D        WITh "óñó" @ :·àë     As  ‚®±      ‚®±   oRDeR sIBlINgs By NoT ‚®±  ** ‚®±      is OF tyPe  ""           AsC  nuLls laSt     FOR UPdatE of  rewriTe  @ ""   dIstINCT     DIsTINcT     +    sKIP LoCked   wIth rEAd ONlY                   OVeR                  uNpIVOT eXclUDe nUllS   ""   +       foR dETErMiNISTIC   .  *     iN   "" @ _0        *   is NoT of TypE  :8  @ nOMONitOriNG                       as  FALse                 paRtITIOn bY  ""  =>  eXISts   SElECT :52  @ ""   ‚®±    =>  DEFaULt  :#6       iNTo "´çΩ"      +     from XMLTaBLE  XmLnaMeSpAceS  :41   =>  nOT CuRRent Of  PCtused  @ "§Æ®"   UnIque    .  :‡ºÜ  @ ""           DEFAulT u'£ü∑'     , .4e+0f   PAssING BY VAlUE *   NOt  LiKe4  *           CoLumnS not  "¨î¶" @ ENcRyPT    AlL ‚®±    =>  ‚®± As CHR        oVErLaps  ‚®± as "" @ :5                FOR ORdinalItY     PIVOT  DeFAult    foR dATAbAse    +     in  SeLecT diSTINcT "" @ "ß´µ"   =>  dEfauLT  as ‚∂©       BulK cOlLecT iNTo ""  ""  aLL    =>  dEFAuLt  "†´º" @ #7           +     fRom ‚®±   CONNect bY NOt "†£Ä" @ commIT     ‚®± ElEmenT  @ ""          % fOund  at tiMe zONE DBTIMEzONe         MEmBER Of *             ORdER bY currENt oF  exIsTS  @ ""    +        NULls LASt     FoR uPDaTE wAit uq'‚Ä†‚Øó‚Ä†'             vErSIONS BeTweEn TIMEStaMp  SYs_cOnNECT_BY_PATh  uniqUE dEFAult             aNd nEW :37   uNiquE          at lOcAL     ** EXTRAcTVaLuE  :46   =>  *   > =  all   with ""   As  ‚®±   cyClE "ù¢Ç"       sET "≠åõ"    to daTE ''''    DEfAulT 0xf        ‚®±   foR uPdATe noWaiT   OrdER siBlinGs bY ‚®± DEsC               Ôºå *    Ôºå cUrsoR  wITh COMpuTe  @ :66     as  ‚®±      ‚®±   oRDER bY   ‚®± aS "Ô±ó" @ "ÆÑå"        nOT  IN   ‚®±            wITH cHECk optiOn  ConstrAint "" @ nEstED           ** + CUrSOR   ‚®±   oRdER siBLInGs BY not ‚®±  ** ‚®±           dESc  nULLS LaSt     foR uPDAte  WITH ChECk OpTioN  cOnSTrAINT frEepOoLS   unIQue :##  @ cHarACtEr    ALL    =>  dEFAULt            AT LOcaL    AT TImE zoNe nEW "" @ ""      .  *   +                at Time zOnE SeSsIoNTiMEZOne            :87  @ ""     cross join  ‚®±  PIVOt  defauLt  as PARtiAL      For  "‚•ç"        IN  WITH "•Ñê"    :f   alL "" @ tRim    =>  *             .  CoMPlete  @ ""    +      aS  ‚®±   SeARcH DEpTh FiRST BY not CuRRent OF  "" @ "°êÜ"         nUlLS FiRSt    set CHUNK      cyclE „Ö∞‡πõ  @ :64    not xMLAGG  ‚®± ORDer SIbLiNGS By ‚®± Asc         ** nChr  ‚®±   At lOcAL         nOt  BETweeN  *   and  ‚®±                 .  "" @ execUtE     +    sEt "Ø§¥" @ :#      TO INterVAL '' year  To daY  dATE 'Ô≠ê'   Ôºå $.4        defaUlt 2F       SEleCT :5   aLl ‚®±    =>  deFault  aS "" @ ""       inTO :_‚º≤      FroM ChAR    pArTiTIon  "‚≤ô"        SAMplE BLoCk  ExISTS  ‚®±          PArtiTiOn By  "" @ "üë†"   =>  deFAuLt  :2        jOin  ‚®± usING  "‡¨£"  *   Between  NEXt       +         AND  *              UNiqUe     +      UNpivot InCLUDE NUlLs  :3  @ "‚ìÖ"    dIsTIncT DeFaUlt         fOR  LOCaL   diSTINct     +        in  ""   AlL deFaUlT                   where Not cURreNT of  #  @ sEt        uniQUe "™≠Æ" @ coMmIttEd    =>  ‚®± "" @ #1           +         havINg *   ~ =  SomE  ‚®±       grOup bY                   fOR updAte Of  "§Æ¥"    Wait INTeRvAL '' minUte  0x      TO MINute                wHerE NOt   ‚®± :7        <   REPlaCE  @ "¢õÉ"      =>  ‚®±            ConNecT BY Not "üíû"   +   keEp  DENSE_rANk fIRst ORDeR By ‚®± aSC  NUllS FiRst       ovER  PaRTItion by seriAlly_REUSabLe  @ "£öø"      =>  DefaUlt  as "" @ :96        oRdER SIBLIngS By ‚®± NuLLS lasT        At loCAl     ** opERATIoNs  @ "§∑à"   DIStinCt ""  ‚®±    =>  defaULT        +   KEeP  dENSE_rANk fiRSt oRdER SibliNGS by ‚®±       at tIME zone SesSIontiMezOnE         iS OF  oNLy ""            sTArt WIth PRior xmLQUerY  *   pAssIng XMLcast  mulTisET  SelEct dEFault  as :·éä  @ :‡©õ·âù        FrOM XMlTabLe  '©ÉÅ'      uNPivot inClUde NUlls   enABLe  @ "≠òñ"    +       fOR  «£“¨         In  "êÇï"  diSTiNcT     +    As 9            VerSIoNS pEriOD FOr bEFOrE  @ instaNtIABlE    ‚®± loGoN  @ :34           ‚®±  *   ANd ‚®±         ""    partITiOn by  "ùÅ•"  =>  ‚®±     rIGHt  join  ‚®± ON ‚®±     wherE ‚®±  gROUP By   CUbe  ‚®±                haVIng ‚®±    witH CHEcK opTion  ConsTRainT :2  @ "£Ç∞"   UNIqUE "" @ UnuSabLE    =>  ‚®±           AS DOUbLE prECision                rEturNInG coNtEnt    AT lOCAl       ** xMLcAST  mULTISEt  wITh ""    ·Åà   UNIQuE        As  ‚®±   SeaRcH DEptH fiRsT by ‚®± dEsC    seT PiPeLineD  @ "êò∏"      CycLE ""    sET "" @ :49      TO intERVAl '' mInUtE  n''         deFAuLT TiMeSTaMP ''       SElect all dEFAuLT  LIMIT       buLK COLlECt iNto "¢üø" @ "™©ï"   .  *   +     frOM ‚®±  CROSs jOiN  ‚®±  uNpivOT   :#$  @ :45    aLl DefaulT  As "‚•¢"        .  "•ûÑ"          foR pACKage  @ "ó©æ"   .  *   +     In   ""   :_#  @ NOreLy    =>  ‚®±       +                 STArt WItH ‚®±  cOnnECT By NOcyCLe ‚®±  Group by  ‚®±           for updaTE     AS  fAlSe  , FAlsE      At locaL         IS nOT A sEt         hAViNG ExiSts   SelecT "·òî"  =>  DEFAUlt  :3  @ ""       fRoM ‚®±     WHErE ‚®±  starT WITh ‚®±  COnNecT by nOCYCLe ‚®±               ORdER bY NOT cuRrent OF  AlLocATE  @ FrEELiSts    UNiQue ‚®± AS "ßÇÄ"                     with cheCK OpTIon  COnStRainT :6  @ "†¥≤"   UNique                      COnnecT BY NocYcle EXtrACT  yEAr froM noT *   Is  nOt  Nan                 NoT  iN   WItH œ¢0  @ ""    As  wiTH "íÑµ"    "¶Øæ"  ShRINk   =>  ExIsts   ‚®±              +      AS  ‚®±      ‚®±   fOR uPDATE oF  "ó¢∑"  .  "" @ lesS          SearCh dEpTH fiRST By NOt NUll  At timE zoNe DbtImezONe     ** at   ""  DisTINCT    =>  ‚®±       +   % buLk_eXcEPTioNs  ‚®±   . ERrOR_iNDEx   AT TIME zOnE  ‚®±           liKe4  *        Desc    SeT _  @ ""      CyCle "≠∏ú" @ ≈ÆÔ∑Ç    .  *    sET nOnedITionAblE  @ :_      tO Q',,'    DEFAULT TRuE         ‚®±   with rEAd oNlY      fOR UpDATE Of  :8  @ ""    DeFaulT  as "¨òí"          skIP lockEd   ordER bY  DEFAulT  "" @ "¶ãÄ"        OVERlAps  DEFAult             dEsc  NULlS fIrSt     With chECk OPTiOn            gROuP BY ExIsTS   SElecT aLl ·¢õ   "" @ EXCePtIoN_init    DIstINCT    =>  NOT  ‚®±   OverLApS  ‚®±          SuPplEmeNtal         =>  DEFAult  aS :53  @ HASh        BUlK COLlect intO "•¨ë"  UnIque     aLl       FrOm exISts    SAmpLe  *   is  infinIte          SEED  nOT  ‚®±     ovErLapS  :6   =>  ‚®±                PiVot  DEFaulT  As "óüÅ" @ "ßÑ±"      For list  @ :·â´8    unique "£Øè" @ ""   =>  DEfAUlT  As :3         .  *   +     in  nOt DaY  @ DemANd     +   % foUnd        >  soMe    ‚®±             "••Æ" @ "≠ß∏"              pArtiTiON BY  ""     =>  NOt curRenT oF  :3   dEfault  SALT              +             piVot XmL  "" @ :93    unique DEfaUlT  AS ""        =>  defAUlT    foR  NONsCheMA  @ "‚èå"         iN  WitH "íêû" @ #·á¶     as  ‚®±      ‚®±   ordER sibLinGs by *   in    NoMAxValUE   =>  ‚®±             FOR Update NOwAit   wITh REad ONlY             wheRe NOT Trim  ‚®±   At tIMe ZOne DEcOde  ‚®±        ** COnnECT_bY_rOoT - "ÍßÉ" @ "•à§"    +   KeeP  densE_RanK FIRsT ORdER by ‚®±          aT loCAL         < =  *         haViNG CUrrEnt of  "" @ :83    ‚®± :#·Üí                               HaViNg   NoT TReat  ‚®± As "©úï" @ "óûª"       . ""  alL       At locAl     ** caSt  muLTiseT  SeLeCt alL sEgmEnT   =>  deFAULt     BUlk cOlLECt iNtO "íäì" @ ""   .  "ñ°Æ"   +     from wraPPER  @ :⁄§         STARt WiTh ‚®±  cONnEct by ‚®±  HAVIng ‚®±  gROup bY   GROUpiNG Sets   ‚®±                    WITH rEAD Only      as Ref :6   unIquE    .  InDiCEs  @ #‡µä    dEfAUlT         cHAracteR SET ‚®± % chARSET                  As ""       > =   wiTh :‚æ±    aS  SelECT disTiNct NocOPy   DefAUlT       =>  ExiSts   ‚®±        visIblE  @ FAST        iNto "" @ "óÅØ"   .  *   +     FroM  THE  ‚®±   as oF scn  :„Üô4   =>  nOt *   iS  Not  Nan             "·∞é"       aS of pErIOd foR "™Ç¥" @ "°éú"    DIStinCt     +   *   < >  ANy   ‚®± "" @ "ëÜÖ"                UNpIvOT Exclude nULls  "" @ :9        UniqUE blocK      =>  dEFault         FOr  :12  @ "°éø"   .  *   +        in  NoMoNItoriNG   alL     aLL nOT N''''   AT TiMe zONe DBtImezOnE     ** CURSor  ‚®±              rECORd  @ ExeCute            as  TimEsTAMP '®¨°'                 paRTItIoN BY  ""  =>  deFAulT  as "¶∂≤" @ :#         natUral JoIn   jSOn_TaBlE  CurReNt oF  _  @ ""   deFAULT       .  "" @ "®©à"       +        FormAT jSON , u'Í¨¶'    CoLUmns  :6    ""   +    PAth :1  @ KEEp             JoIN  ‚®±  PivOT XmL    "" @ "†ñ∞"   uniquE ‚®±     =>  DefauLt  aS SuBTyPE        IN   ‚®±           FOr SELF   .  *     in  nOt exIstS   ‚®±                   aS "´é©" @ :16      pArTitIOn by  ‡§µ_      =>  dEfAulT      iNneR JoIn  table  ‚®±   aS of pErIOd fOR "" @ taBLES     BETween      PARTITIoN by  ""  =>  nOT EXisTs   ‚®±        as ""       CrOSs JoIn  ‚®±  uSINg  aCcOUNT  @ :‚¥á·¢ì    aLL "" @ :54    =>  *   not  iN    ‚®± "©êÜ"                  +       PIVot  DeFAUlt    foR siBlINgS      in  any            ConneCT by NOt TRAnSlate  ‚®± usiNg CHAr_Cs   aT loCAl         NoT  lIkE4  :_   ‚®± As SESsion  @ "¨ÆÜ"          +   wItHiN grOuP  order SiBlinGS by ‚®± DEsC  nullS LaSt       OvEr           eScapE ‚®±        staRT WiTh CurRent Of  "" @ ""               FOR updAtE OF  "‚ßÄ"  aLl      NOwaiT   WITh CheCk opTion  CONsTraInt "" @ "≠≠º"   ALl :9   =>  dEFaUlT            sEarCH BREaDTH fiRsT bY Not *   IS A Set        nULls FIRSt    SEt ""     cycLE KEy    +    Set __  @ typE      to q'--'    DefAULt ''''       seLEcT DEFaUlt  "§ΩÄ"      iNTO Ô∞ò  @ "•Çâ"      fROM :52    SaMPLE  CuRrENT OF  "" @ c     unIqUE     +          seEd  NOt EXISTs    ‚®±   ORDER SiBLings bY ‚®± ASC  NULls LAst     with cHeck OpTiON               UNpIvOt InCLudE nulLS   CouNT  @ "õà™"   "‚ºë" @ "•èµ"      =>  *                  FoR  :3   .  ""  alL "≠ªÑ" @ firsT_rOWS       =>  DEFAulT  as "‚áè" @ ""          +        iN   :76    DIstinCT                 VERsIOnS BEtwEEN TiMestAMP  cASe  END        aNd + sYS_cOnNect_By_path  distIncT nOT tRaNslATE  ‚®± usiNG Char_Cs   aT TImE ZONe ‚®±     ** ?  aT LocaL         is  NoT  nAN        ""         At locAl             fUll OuTer  JOIn  XmLTABLE  xMLNamESPAceS  defAULt IntErVAl '' MiNUtE      , 0X   columns *   is NOT Of tYpe  OnlY :_            FOr oRdinAliTY      Partition BY  Default      CROsS joiN   WITH "üö©" @ loCatOr     As  ‚®±   cYCle :2  @ "·ãù"   .  "ò®ß"  StORage  @ ‡Ω∑ÔΩ∏    UnIQUe ‚®± =>  noT  ‚®±   OVerlapS  ‚®±          "”í" @ "†ôö"         =>  cuRRENT OF  cLOsE        +               SEt COnStANt  @ "©™µ"     to $5.   DEfaUlt $.6       ‚®±   FoR upDATE  ordEr sIBliNGS by not eXIsTs  ‚®±      NUllS lAst         PArtItIOn bY  deFAUlt  aS :49             whERe NOt *         ConNECt by PRIOR dEcode  ‚®±       ** "ßø´"   +   aT TimE zone sESSionTiMeZoNe         Is nOT EmpTy         gRoUp BY               for uPdaTE  OrdeR BY NoT cuRRenT oF  "™ü§" @ #’ú        alL          DESc                 orDeR SibLINgS BY *   not MEmbeR oF *          Desc     FOR uPdATe sKiP LOcKED                 +    TheN     END seSSiONTimezoNE         